<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="Description"
        content="Bennes solidaires est un outils dédié à l'économie circulaire des matériaux bio et géo-sourcés">
    <meta name="Keywords" content="Économie circulaire, plateforme de dons, matériaux bio et géo-sourcés">
    <meta name="Copyright" content="Bennes solidaires">
    <meta name="Author" content="Bennes solidaires">
    <meta name="Revisit-After" content="15 days">
    <meta name="Robots" content="All">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="../appearance/annonce-chercher.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link href="https://api.fontshare.com/v2/css?f[]=excon@400,900,700,500,300,100,1&display=swap" rel="stylesheet">
    <link rel="icon" href="../images/BS.webp" type="image/x-icon">
    <title>Bennes Solidaires - modifier une annonce</title>
</head>

<body>

    <header id="header">
        <div class="container_menu">
            <div>
                <a href="./accueil.html" class="logo"><img src="../images/Bennes-solidaires.webp"
                        alt="Bennes solidaires"></a>
            </div>

            <div class="navbar">
                <ul class="links">
                    <li><a href="./accueil.html">ACCUEIL</a></li>

                    <div class="circle_menu"></div>

                    <li class="dropdown">
                        <a href="./accueil.html#deposer">DÉPOSER UNE ANNONCE</a>
                        <ul class="dropdown-menu_one">
                            <li><a href="./annonce-chercher.html">Chercher un matériau</a></li>
                            <li><a href="./annonce-donner.html">Donner un matériau</a></li>
                        </ul>
                    </li>
                    <div class="circle_menu"></div>

                    <li class="dropdown">
                        <a href="./connexion.html">CONNEXION</a>
                        <ul class="dropdown-menu_two">
                            <li><a href="./connexion.html">Connexion</a></li>
                            <li><a href="./inscription.html">Inscription</a></li>
                        </ul>
                    </li>

                    <div class="circle_menu"></div>

                    <li class="dropdown">
                        <a href="./profil.html">MON PROFIL</a>
                        <ul class="dropdown-menu_two">
                            <li><a href="./profil.html">Voir mon profil</a></li>
                            <li><a href="./mes-annonces.html">Mes annonces</a></li>
                            <li><a href="./messagerie.html">Messagerie</a></li>
                        </ul>
                    </li>

                    <div class="circle_menu"></div>

                    <li><a href="./accueil.html#adhesion">ADHÉSION</a></li>

                    <div class="circle_menu"></div>

                    <li><a href="./accueil.html#contact">CONTACT</a></li>
                </ul>

                <div class="burger-menu-button" id="nav-toggle">
                    <i class="fa-solid fa-bars"></i>
                </div>
            </div>
        </div>

        <div class="burger-menu" id="nav-menu">
            <ul class="links">
                <li><a href="./accueil.html">ACCUEIL</a></li>
                <li><a href="./accueil.html#deposer">DÉPOSER UNE ANNONCE</a></li>
                <li><a href="./connexion.html">CONNEXION</a></li>
                <li><a href="./accueil.html#adhesion">ADHÉSION</a></li>
                <li><a href="./accueil.html#contact">CONTACT</a></li>
            </ul>
        </div>
    </header>


    <main>

        <div class="container">
            <section id="inscription">
                <div class="scrolling-text-container">
                    <p class="scrolling-text">Je cherche un matériau</p>
                    <p class="scrolling-text">Modifier mon annonce</p>
                    <p class="scrolling-text">Je cherche un matériau</p>
                    <p class="scrolling-text">Modifier mon annonce</p>
                </div>
                <div class="bordure mb-4"></div>

                <form action="#" method="POST">
                    <label for="classification-select" class="classification-select">Classification</label>
                    <select name="classification" id="classification-select" required>
                        <option value="">--</option>
                        <option value="Matériau bio-sourcé">Matériau bio-sourcé</option>
                        <option value="Matériau géo-sourcé">Matériau géo-sourcé</option>
                    </select>


                    <label for="materiau-geo-select" class="materiau-select-geo"
                        style="display: none;">Matériaux</label>
                    <select name="materiau-geo-select" id="materiau-geo-select" style="display: none;" required>
                        <option value="">--</option>
                        <option value="materiau geo-source">Terre</option>
                        <option value="materiau geo-source">Pierre</option>
                        <option value="materiau geo-source">Gravier</option>
                        <option value="materiau geo-source">Sable</option>
                        <option value="materiau geo-source">Verre</option>
                        <option value="materiau geo-source">Céramique</option>
                        <option value="materiau geo-source">Ajouter un matériau</option>
                    </select>

                    <label for="materiau-bio-select" class="materiau-select-bio"
                        style="display: none;">Matériaux</label>
                    <select name="materiau-bio-select" id="materiau-bio-select" style="display: none;" required>
                        <option value="">--</option>
                        <option value="materiau bio-source">Bois</option>
                        <option value="materiau bio-source">Papier</option>
                        <option value="materiau bio-source">Papier-journal</option>
                        <option value="materiau bio-source">Paille</option>
                        <option value="materiau bio-source">Canne-de-provence</option>
                        <option value="materiau bio-source">Cambou</option>
                        <option value="materiau bio-source">Sciure de bois</option>
                        <option value="materiau bio-source">Liège</option>
                        <option value="materiau bio-source">Coquille d'huître</option>
                        <option value="materiau bio-source">Coquille d'escargot</option>
                        <option value="materiau bio-source">Marc de café</option>
                        <option value="materiau bio-source">Ajouter un matériau</option>
                    </select>


                    <label for="geographical">Région</label>
                    <input id="address-input" type="text" name="geographical" placeholder="Entrez une adresse" required>


                    <div id="map"></div>

                    <div class="custom-popup"></div>

                    <div class="foot_form">
                        <div class="search">
                            <button onclick="searchAddress()">Rechercher</button>
                        </div>
                        <input type="submit" value="Valider les modifications">
                    </div>
                </form>
            </section>
        </div>

    </main>

    <script>
        // Récupérer les éléments du menu burger et du menu burger lui-même
        const burgerMenuButton = document.querySelector('.burger-menu-button');
        const burgerMenu = document.querySelector('.burger-menu');

        // Récupérer la carte
        const mapContainer = document.getElementById('map');

        // Ajouter un gestionnaire d'événements pour l'ouverture et la fermeture du menu burger
        burgerMenuButton.addEventListener('click', function () {
            burgerMenu.classList.toggle('open');

            // Masquer ou afficher la carte en fonction de l'état du menu burger
            if (burgerMenu.classList.contains('open')) {
                mapContainer.style.display = 'none'; // Masquer la carte lorsque le menu burger est ouvert
            } else {
                mapContainer.style.display = 'block'; // Afficher la carte lorsque le menu burger est fermé
            }

            // Récupérer tous les conteneurs de texte de défilement
            const scrollingTextContainers = document.querySelectorAll('.scrolling-text-container');
            // Masquer ou afficher les conteneurs de texte de défilement en fonction de l'état du menu burger
            scrollingTextContainers.forEach(container => {
                container.style.display = burgerMenu.classList.contains('open') ? 'none' : 'flex';
            });

            // Ajouter ou retirer la balise i pour la croix du bouton close
            const isOpen = burgerMenu.classList.contains('open');
            if (isOpen) {
                burgerMenuButton.innerHTML = '<i class="fa-solid fa-xmark"></i>';
            } else {
                burgerMenuButton.innerHTML = '<i class="fa-solid fa-bars"></i>'; // Réinitialiser le contenu du menu-burger
            }
        });

        // Récupérer les éléments de la barre de navigation
        const navLinks = document.querySelectorAll('.links a');

        // Ajouter un gestionnaire d'événements pour la fermeture du menu burger lorsque l'utilisateur clique sur un lien de navigation
        navLinks.forEach(link => {
            link.addEventListener('click', function () {
                burgerMenu.classList.remove('open');
                // Récupérer tous les conteneurs de texte de défilement
                const scrollingTextContainers = document.querySelectorAll('.scrolling-text-container');
                // Afficher les conteneurs de texte de défilement avec display flex lorsque l'utilisateur clique sur un lien de navigation
                scrollingTextContainers.forEach(container => {
                    container.style.display = 'flex';
                });
                // Réinitialiser le contenu du menu-burger
                burgerMenuButton.innerHTML = '<i class="fa-solid fa-bars"></i>';
                // Afficher à nouveau la carte lorsque le menu burger est fermé
                mapContainer.style.display = 'block';
            });
        });

        // SCRIPT SELECT MATÉRIAU
        const classificationSelect = document.getElementById('classification-select');
        const materiauGeoSelect = document.getElementById('materiau-geo-select');
        const materiauBioSelect = document.getElementById('materiau-bio-select');
        const materiauGeoLabel = document.querySelector('.materiau-select-geo');
        const materiauBioLabel = document.querySelector('.materiau-select-bio');

        classificationSelect.addEventListener('change', function () {
            if (this.value === 'Matériau géo-sourcé') {
                materiauGeoSelect.style.display = 'block';
                materiauBioSelect.style.display = 'none';
                materiauGeoLabel.style.display = 'block';
                materiauBioLabel.style.display = 'none';
            } else if (this.value === 'Matériau bio-sourcé') {
                materiauGeoSelect.style.display = 'none';
                materiauBioSelect.style.display = 'block';
                materiauGeoLabel.style.display = 'none';
                materiauBioLabel.style.display = 'block';
            } else {
                materiauGeoSelect.style.display = 'none';
                materiauBioSelect.style.display = 'none';
                materiauGeoLabel.style.display = 'none';
                materiauBioLabel.style.display = 'none';
            }
        });
        // SCRIPT SELECT MATÉRIAU

        // SCRIPT MAP
        const map = L.map('map').setView([48.8566, 2.3522], 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        function searchAddress() {
            const address = document.getElementById("address-input").value;
            const url = 'https://nominatim.openstreetmap.org/search?format=json&q=' + encodeURIComponent(address);

            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (data && data.length > 0) {
                        const lat = data[0].lat;
                        const lon = data[0].lon;

                        const myIcon = L.icon({
                            iconUrl: '../images/marker.png',
                            iconSize: [50, 50],
                            iconAnchor: [22, 94],
                            popupAnchor: [3, -76],
                        });

                        // Créer un marqueur aux coordonnées trouvées
                        const marker = L.marker([lat, lon], {
                            icon: myIcon
                        }).addTo(map);

                        // Construire le contenu HTML du popup avec les informations de la publication
                        const popupContent = `
                            <div>
                                <h6>Bottes de paille</h6>
                                <p>Date: 01/05/2024</p>
                                <p>Bonjour, je donne 3 bottes de paille de blé destinés à la construction mais elles ont un taux d’humidité trop haut pour les utiliser.</p>
                                <a href="./annonce-detail.html"><p>Voir l'annonce</p></a>
                            </div>
                        `;

                        // Ajouter une popup au marqueur pour afficher l'adresse
                        marker.bindPopup(popupContent, {
                            className: 'custom-popup',
                        });

                        // Définir un gestionnaire d'événements pour ouvrir le popup lors du clic sur le marqueur
                        marker.on('click', function () {
                            this.openPopup();
                        });

                        // Centrer la carte sur le marqueur
                        map.setView([lat, lon], 13);
                    } else {
                        alert("Adresse non trouvée");
                    }
                })
                .catch(error => {
                    console.error('Erreur lors de la recherche d\'adresse :', error);
                    alert("Une erreur s'est produite lors de la recherche d'adresse");
                });
        }
        // SCRIPT MAP
    </script>


</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
</body>

</html>