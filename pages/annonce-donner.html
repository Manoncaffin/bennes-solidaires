<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="Description"
        content="Bennes solidaires est un outils dédié à l'économie circulaire des matériaux bio et géo-sourcés">
    <meta name="Keywords" content="Économie circulaire, plateforme de dons, matériaux bio et géo-sourcés">
    <meta name="Copyright" content="Bennes solidaires">
    <meta name="Author" content="Bennes solidaires">
    <meta name="Revisit-After" content="15 days">
    <meta name="Robots" content="All">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="../appearance/annonce-donner.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link href="https://api.fontshare.com/v2/css?f[]=excon@400,900,700,500,300,100,1&display=swap" rel="stylesheet">
    <link rel="icon" href="../images/BS.webp" type="image/x-icon">
    <title>Bennes Solidaires - créer une annonce</title>
</head>

<body>

    <header id="header">
        <div class="container_menu">
            <div>
                <a href="./accueil.html" class="logo"><img src="../images/Bennes-solidaires.webp"
                        alt="Bennes solidaires"></a>
            </div>

            <div class="navbar">
                <ul class="links">
                    <li><a href="./accueil.html">ACCUEIL</a></li>

                    <div class="circle_menu"></div>

                    <li class="dropdown">
                        <a href="#deposer">DÉPOSER UNE ANNONCE</a>
                        <ul class="dropdown-menu_one">
                            <li><a href="./annonce-chercher.html">Chercher un matériau</a></li>
                            <li><a href="./annonce-donner.html">Donner un matériau</a></li>
                        </ul>
                    </li>
                    <div class="circle_menu"></div>

                    <li class="dropdown">
                        <a href="./connexion.html">CONNEXION</a>
                        <ul class="dropdown-menu_two">
                            <li><a href="./profil.html">Connexion</a></li>
                            <li><a href="./inscription.html">Inscription</a></li>
                        </ul>
                    </li>

                    <div class="circle_menu"></div>

                    <li class="dropdown">
                        <a href="./profil.html">MON PROFIL</a>
                        <ul class="dropdown-menu_two">
                            <li><a href="./profil.html">Voir mon profil</a></li>
                            <li><a href="./mes-annonces.html">Mes annonces</a></li>
                            <li><a href="./messagerie.html">Messagerie</a></li>
                        </ul>
                    </li>

                    <div class="circle_menu"></div>

                    <li><a href="#adhesion">ADHÉSION</a></li>

                    <div class="circle_menu"></div>

                    <li><a href="#contact">CONTACT</a></li>
                </ul>

                <div class="burger-menu-button" id="nav-toggle">
                    <i class="fa-solid fa-bars"></i>
                </div>
            </div>
        </div>

        <div class="burger-menu" id="nav-menu">
            <ul class="links">
                <li><a href="./accueil.html">ACCUEIL</a></li>
                <li><a href="#deposer">DÉPOSER UNE ANNONCE</a></li>
                <li><a href="./connexion.html">CONNEXION</a></li>
                <li><a href="#adhesion">ADHÉSION</a></li>
                <li><a href="#contact">CONTACT</a></li>
            </ul>
        </div>
    </header>


    <main>

        <div class="container">
            <section id="inscription">
                <div class="scrolling-text-container">
                    <p class="scrolling-text">Je donne un matériau</p>
                    <p class="scrolling-text">Je donne un matériau</p>
                    <p class="scrolling-text">Je donne un matériau</p>
                    <p class="scrolling-text">Je donne un matériau</p>
                </div>
                <div class="bordure mb-4"></div>

                <form action="#" method="POST">
                    <label for="classification-select" class="classification-select">Classification</label>
                    <select name="classification" id="classification-select" required onchange="toggleMaterialSelect()">
                        <option value="">--</option>
                        <option value="Matériau bio-sourcé">Matériau bio-sourcé</option>
                        <option value="Matériau géo-sourcé">Matériau géo-sourcé</option>
                    </select>

                    <label for="materiau-geo-select" class="materiau-select-geo"
                        style="display: none;">Matériaux</label>
                    <select name="materiau-geo-select" id="materiau-geo-select" style="display: none;" required>
                        <option value="">--</option>
                        <option value="materiau geo-source">Terre</option>
                        <option value="materiau geo-source">Pierre</option>
                        <option value="materiau geo-source">Gravier</option>
                        <option value="materiau geo-source">Sable</option>
                        <option value="materiau geo-source">Verre</option>
                        <option value="materiau geo-source">Céramique</option>
                        <option value="ajouter-un-materiau-geo">Le matériau ne figure pas dans la liste</option>
                    </select>

                    <label for="materiau-bio-select" class="materiau-select-bio"
                        style="display: none;">Matériaux</label>
                    <select name="materiau-bio-select" id="materiau-bio-select" style="display: none;" required>
                        <option value="">--</option>
                        <option value="materiau bio-source">Bambou</option>
                        <option value="materiau bio-source">Bois</option>
                        <option value="materiau bio-source">Canne-de-provence</option>
                        <option value="materiau bio-source">Chanvre</option>
                        <option value="materiau bio-source">Coquille d'huître</option>
                        <option value="materiau bio-source">Coquille d'escargot</option>
                        <option value="materiau bio-source">Laine de mouton</option>
                        <option value="materiau bio-source">Liège</option>
                        <option value="materiau bio-source">Marc de café</option>
                        <option value="materiau bio-source">Papier</option>
                        <option value="materiau bio-source">Papier-journal</option>
                        <option value="materiau bio-source">Paille de blé</option>
                        <option value="materiau bio-source">Paille de lavande</option>
                        <option value="materiau bio-source">Roseau</option>
                        <option value="materiau bio-source">Sciure de bois</option>
                        <option value="ajouter-un-materiau-bio">Le matériau ne figure pas dans la liste</option>
                    </select>

                    <!-- Champ d'entrée pour ajouter un matériau personnalisé -->
                    <div class="add" style="display: none;">
                        <label for="new-material" class="new-material">Ajouter</label>
                        <input type="text" id="new-material" placeholder="Entrer un autre matériau">
                    </div>

                    <div class="quantity">
                        <label for="number" class="quantity-select">Quantité</label>
                        <select name="number-select" id="quantity-select" required>
                            <option value="">--</option>
                            <option value=""></option>
                            <option value=""></option>
                        </select>

                        <label for="value" class="value-select">Valeur</label>
                        <select name="value" id="value-select" required>
                            <option value="">--</option>
                            <option value="kg">kg</option>
                            <option value="kg">tonnes</option>
                            <option value="sceau">seau(x)</option>
                            <option value="metres">mètre(s) linéaire(s)</option>
                            <option value="metres carres">mètre(s) carré(s)</option>
                            <option value="metres cubes">mètre(s) cube(s)</option>
                        </select>
                    </div>

                    <div class="file">
                        <label for="file">Joindre des photos</label>
                        <input id="file" type="file" name="file" placeholder="Choisir un fichier" required>
                    </div>

                    <div class="message_enter">
                        <label for="description">Description</label>
                        <textarea id="message" placeholder="Entrez votre description ici" required></textarea>
                    </div>

                    <label for="geographical">Localisation</label>
                    <input id="geographical" type="text" name="geographical" placeholder="Entrez un code postal"
                        required>

                    <div class="foot_form">
                        <input type="submit" value="Valider mon annonce">
                    </div>
                </form>
            </section>
        </div>

    </main>

    <script>
         // SCRIPT OPEN MENU-BURGER / HIDDEN SCROLLING-TEXT
        // Récupérer les éléments du menu burger et du menu burger lui-même
        const burgerMenuButton = document.querySelector('.burger-menu-button');
        const burgerMenu = document.querySelector('.burger-menu');

        // Ajouter un gestionnaire d'événements pour l'ouverture et la fermeture du menu burger
        burgerMenuButton.addEventListener('click', function () {
            burgerMenu.classList.toggle('open');
            // Récupérer tous les conteneurs de texte de défilement
            const scrollingTextContainers = document.querySelectorAll('.scrolling-text-container');
            // Masquer ou afficher les conteneurs de texte de défilement en fonction de l'état du menu burger
            scrollingTextContainers.forEach(container => {
                if (burgerMenu.classList.contains('open')) {
                    container.style.display = 'none'; // Masquer le conteneur de texte de défilement lorsque le menu burger est ouvert
                } else {
                    container.style.display = 'flex'; // Afficher le conteneur de texte de défilement avec display flex lorsque le menu burger est fermé
                }
            });

            // Ajouter ou retirer la balise i pour la croix du bouton close
            const isOpen = burgerMenu.classList.contains('open');
            if (isOpen) {
                burgerMenuButton.innerHTML = '<i class="fa-solid fa-xmark"></i>';
            } else {
                burgerMenuButton.innerHTML = '<i class="fa-solid fa-bars"></i>'; // Réinitialiser le contenu du menu-burger
            }
        });

        // Récupérer les éléments de la barre de navigation
        const navLinks = document.querySelectorAll('.links a');

        // Ajouter un gestionnaire d'événements pour la fermeture du menu burger lorsque l'utilisateur clique sur un lien de navigation
        navLinks.forEach(link => {
            link.addEventListener('click', function () {
                burgerMenu.classList.remove('open');
                // Récupérer tous les conteneurs de texte de défilement
                const scrollingTextContainers = document.querySelectorAll('.scrolling-text-container');
                // Afficher les conteneurs de texte de défilement avec display flex lorsque l'utilisateur clique sur un lien de navigation
                scrollingTextContainers.forEach(container => {
                    container.style.display = 'flex';
                });
                // Réinitialiser le contenu du menu-burger
                burgerMenuButton.innerHTML = '<i class="fa-solid fa-bars"></i>';
            });
        });
        // SCRIPT OPEN MENU-BURGER / HIDDEN SCROLLING-TEXT

        // SCRIPT SELECT MATÉRIAU
        const classificationSelect = document.getElementById('classification-select');
        const materiauGeoSelect = document.getElementById('materiau-geo-select');
        const materiauBioSelect = document.getElementById('materiau-bio-select');
        const materiauGeoLabel = document.querySelector('.materiau-select-geo');
        const materiauBioLabel = document.querySelector('.materiau-select-bio');

        classificationSelect.addEventListener('change', function () {
            if (this.value === 'Matériau géo-sourcé') {
                materiauGeoSelect.style.display = 'block';
                materiauBioSelect.style.display = 'none';
                materiauGeoLabel.style.display = 'block';
                materiauBioLabel.style.display = 'none';
            } else if (this.value === 'Matériau bio-sourcé') {
                materiauGeoSelect.style.display = 'none';
                materiauBioSelect.style.display = 'block';
                materiauGeoLabel.style.display = 'none';
                materiauBioLabel.style.display = 'block';
            } else {
                materiauGeoSelect.style.display = 'none';
                materiauBioSelect.style.display = 'none';
                materiauGeoLabel.style.display = 'none';
                materiauBioLabel.style.display = 'none';
            }
        });
        // SCRIPT SELECT MATÉRIAU

        // SCRIPT QUANTITY
        const select = document.getElementById("quantity-select");
        const maxNumber = 1000; // Spécifiez ici le nombre maximum souhaité

        for (let i = 1; i <= maxNumber; i++) {
            const option = document.createElement("option");
            option.text = i;
            option.value = i;
            select.appendChild(option);
        }
        // SCRIPT QUANTITY

        // AJOUTER UN MATÉRIAU

        // Fonction pour basculer entre les options de matériaux bio-sourcés et géo-sourcés
        function toggleMaterialSelect() {
            const classificationSelect = document.getElementById("classification-select");
            const materiauBioSelect = document.getElementById("materiau-bio-select");
            const materiauGeoSelect = document.getElementById("materiau-geo-select");
            const newMaterialInput = document.getElementById("new-material");

            if (classificationSelect.value === "Matériau bio-sourcé") {
                materiauBioSelect.style.display = "block";
                materiauGeoSelect.style.display = "none";
            } else if (classificationSelect.value === "Matériau géo-sourcé") {
                materiauBioSelect.style.display = "none";
                materiauGeoSelect.style.display = "block";
            }

            // Cacher le champ d'entrée de matériau personnalisé
            newMaterialInput.style.display = "none";
        }

        // Fonction pour afficher le champ d'entrée pour ajouter un nouveau matériau
        function showCustomMaterialInput() {
            const newMaterialInput = document.getElementById("new-material");
            newMaterialInput.style.display = "block";
        }

        // Fonction pour basculer l'affichage de l'élément "Ajouter un matériau" en fonction de la sélection
        function toggleMaterialElements(show) {
            const addDiv = document.querySelector('.add');
            addDiv.style.display = show ? 'block' : 'none';
        }

        // Ajouter des écouteurs d'événements pour les options "Ajouter un matériau"
        materiauBioSelect.addEventListener("change", function () {
            if (materiauBioSelect.value === "ajouter-un-materiau-bio") {
                showCustomMaterialInput();
                toggleMaterialElements(true);
            } else {
                toggleMaterialElements(false);
            }
        });

        materiauGeoSelect.addEventListener("change", function () {
            if (materiauGeoSelect.value === "ajouter-un-materiau-geo") {
                showCustomMaterialInput();
                toggleMaterialElements(true);
            } else {
                toggleMaterialElements(false);
            }
        });

        // Appeler la fonction toggleMaterialSelect au chargement de la page
        toggleMaterialSelect();

        // AJOUTER UN MATÉRIAU

        // GÉRER LE BOUTTON POUR ADD MATERIAL
        // Fonction pour afficher ou masquer la div add-material en fonction de la sélection de l'utilisateur
        function toggleAddMaterialDiv(show) {
            const addMaterialDiv = document.querySelector('.add-material');
            addMaterialDiv.style.display = show ? 'block' : 'none';
            const addButton = document.querySelector('.add-material input[type="submit"]');
            addButton.style.display = show ? 'block' : 'none';
        }

        // Fonction pour gérer l'affichage de la div add-material lorsque l'utilisateur sélectionne "Ajouter un matériau" dans les listes déroulantes
        function handleMaterialSelectChange(selectElement) {
            if (selectElement.value === "ajouter-un-materiau-bio" || selectElement.value === "ajouter-un-materiau-geo") {
                toggleAddMaterialDiv(true);
            } else {
                toggleAddMaterialDiv(false);
            }
        }

        // Ajouter des écouteurs d'événements pour les changements de sélection dans les listes déroulantes
        materiauBioSelect.addEventListener("change", function () {
            handleMaterialSelectChange(this);
        });

        materiauGeoSelect.addEventListener("change", function () {
            handleMaterialSelectChange(this);
        });
        // GÉRER LE BOUTTON POUR ADD MATERIAL

        // SEARCH CITY
        let searchTimeout;

        document.getElementById("geographical").addEventListener("input", function () {
            const postalCode = this.value.trim();
            clearTimeout(searchTimeout); // Pour éviter les requêtes multiples pendant la saisie

            // Attendez un court délai après la saisie avant de déclencher la recherche
            searchTimeout = setTimeout(() => {
                if (postalCode.length === 5 && /^\d+$/.test(postalCode)) { // Vérifie si le code postal est valide
                    const url = 'https://nominatim.openstreetmap.org/search?format=json&postalcode=' + encodeURIComponent(postalCode);

                    fetch(url)
                        .then(response => response.json())
                        .then(data => {
                            if (data && data.length > 0) {
                                const city = data[0].display_name;
                                // Remplir le champ avec la ville trouvée
                                document.getElementById("geographical").value = city;
                            } else {
                                alert("Aucune ville trouvée pour ce code postal");
                            }
                        })
                        .catch(error => {
                            console.error('Erreur lors de la recherche de ville par code postal :', error);
                            alert("Une erreur s'est produite lors de la recherche de ville par code postal");
                        });
                } else {
                    // Code postal invalide, afficher un prompt d'erreur
                    alert("Veuillez entrer un code postal valide (5 chiffres).");
                }
            }, 500); // Délai de 500 millisecondes avant de déclencher la recherche
        });
        // SEARCH CITY
    </script>

</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=VOTRE_CLE_API&libraries=places"></script>
</body>

</html>